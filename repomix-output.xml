This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.continue/agents/new-config.yaml
.gitignore
app/actions/consumeItem.ts
app/actions/createPrinted.ts
app/actions/updateProcess.ts
app/components/SummaryCard.tsx
app/constants.ts
app/data.ts
app/globals.css
app/item/[id]/page.tsx
app/layout.tsx
app/page.tsx
app/print/page.tsx
app/types.ts
app/utils.ts
lib/mockStore.ts
next.config.js
package.json
postcss.config.js
README.md
tailwind.config.js
tsconfig.json
tsconfig.node.json
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path=".continue/agents/new-config.yaml">
# This is an example configuration file
# To learn more, see the full config.yaml reference: https://docs.continue.dev/reference

name: Example Config
version: 1.0.0
schema: v1

# Define which models can be used
# https://docs.continue.dev/customization/models
models:
  - name: my gpt-5
    provider: openai
    model: gpt-5
    apiKey: YOUR_OPENAI_API_KEY_HERE
  - uses: ollama/qwen2.5-coder-7b
  - uses: anthropic/claude-4-sonnet
    with:
      ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}

# MCP Servers that Continue can access
# https://docs.continue.dev/customization/mcp-tools
mcpServers:
  - uses: anthropic/memory-mcp
</file>

<file path=".gitignore">
# dependencies
/node_modules
/.pnp
.pnp.js

# testing
/coverage

# next.js
/.next/
/out/

# production
/build

# misc
.DS_Store
*.pem

# debug
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# local env files
.env*.local
.env

# vercel
.vercel

# typescript
*.tsbuildinfo
next-env.d.ts

# IDE
.vscode/
.idea/
*.swp
*.swo

# OS
Thumbs.db
</file>

<file path="app/components/SummaryCard.tsx">
// app/dashboard/components/SummaryCard.tsx
import React from 'react';

interface SummaryCardProps {
  title: string;
  value: number | string;
  valueColor?: string;
}

export function SummaryCard({ title, value, valueColor = 'text-gray-800' }: SummaryCardProps) {
  return (
    <div className="bg-white p-6 rounded-xl shadow-lg flex items-center">
      <div>
        <p className="text-lg text-gray-500">{title}</p>
        <p className={`text-5xl font-extrabold ${valueColor}`}>{value}</p>
      </div>
    </div>
  );
}
</file>

<file path="app/constants.ts">
import { Process } from './types';

export const PROCESSES: { key: Process; name: string }[] = [
  { key: 'UNPRINTED', name: '未プリント' },
  { key: 'PRINTED', name: 'プリント済み' },
  { key: 'SURFACE_TREATMENT', name: '表面処理' },
  { key: 'CUTTING', name: '切削' },
  { key: 'PAINTING', name: '塗装' },
  { key: 'READY', name: '準備完了' },
];
</file>

<file path="app/data.ts">
// app/dashboad/data.ts
import { Part, PartItem } from './types';

export const parts: Part[] = [
  { id: 1, part_number: 'PART-A' },
  { id: 2, part_number: 'PART-B' }
];

export const partItems: PartItem[] = [
  { id: 101, part_id: 1, storage_case: 'Case-01', current_process: 'PRINTED', completed_at: null },
  { id: 102, part_id: 2, storage_case: 'Case-02', current_process: 'READY', completed_at: new Date() }
];
</file>

<file path="app/types.ts">
export type Process = 
  | 'UNPRINTED'
  | 'PRINTED'
  | 'SURFACE_TREATMENT'
  | 'CUTTING'
  | 'PAINTING'
  | 'READY';

export interface Part {
  id: number;
  part_number: string;
}

export interface PartItem {
  id: number;
  part_id: number;
  storage_case: string;
  current_process: Process;
  completed_at: Date | null;
}

export interface ProgressData {
  part_number: string;
  storage_cases: string[];
  counts: Record<Process, number>;
}
</file>

<file path="app/utils.ts">
import { Part, PartItem, ProgressData, Process } from './types';

export const aggregateProgress = (parts: Part[], partItems: PartItem[]): ProgressData[] => {
  const progressMap = new Map<string, { storage_cases: Set<string>; counts: Record<Process, number> }>();

  parts.forEach(part => {
    progressMap.set(part.part_number, {
      storage_cases: new Set(),
      counts: {
        UNPRINTED: 0, PRINTED: 0, SURFACE_TREATMENT: 0,
        CUTTING: 0, PAINTING: 0, READY: 0,
      },
    });
  });

  partItems.forEach(item => {
    const part = parts.find(p => p.id === item.part_id);
    if (part) {
      const currentData = progressMap.get(part.part_number);
      if (currentData) {
        currentData.counts[item.current_process]++;
        currentData.storage_cases.add(item.storage_case);
      }
    }
  });

  return Array.from(progressMap.entries()).map(([part_number, data]) => ({
    part_number,
    storage_cases: Array.from(data.storage_cases).sort(),
    counts: data.counts,
  }));
};
</file>

<file path="lib/mockStore.ts">
import { Part, PartItem, Process } from '@/app/types';
import { parts as initialParts, partItems as initialPartItems } from '@/app/data';

// サーバーサイドでのメモリストア（シングルトン）
// Next.jsのHMR（Hot Module Replacement）でリセットされないように global を使用
declare global {
    var __mock_store: {
        parts: Part[];
        partItems: PartItem[];
    } | undefined;
}

if (!global.__mock_store) {
    global.__mock_store = {
        parts: [...initialParts],
        partItems: [...initialPartItems],
    };
}

const store = global.__mock_store!;

export const mockStore = {
    getParts: async (): Promise<Part[]> => {
        return store.parts;
    },

    getPartItems: async (): Promise<PartItem[]> => {
        return store.partItems;
    },

    getPartItem: async (id: number): Promise<(PartItem & { parts: Part }) | null> => {
        const item = store.partItems.find((i) => i.id === id);
        if (!item) return null;
        const part = store.parts.find((p) => p.id === item.part_id);
        return { ...item, parts: part! };
    },

    updatePartItem: async (id: number, updates: Partial<PartItem>): Promise<void> => {
        const index = store.partItems.findIndex((i) => i.id === id);
        if (index !== -1) {
            store.partItems[index] = { ...store.partItems[index], ...updates };
        }
    },

    addPartItem: async (item: Omit<PartItem, 'id'>): Promise<PartItem> => {
        const newId = Math.max(0, ...store.partItems.map((i) => i.id)) + 1;
        const newItem = { ...item, id: newId };
        store.partItems.push(newItem);
        return newItem;
    },

    // localStorage への保存・読み込み（ブラウザ側で呼び出す場合を想定）
    // サーバーアクション内では動作しませんが、クライアントコンポーネント用として用意
    saveToLocalStorage: () => {
        if (typeof window !== 'undefined') {
            localStorage.setItem('mock_parts', JSON.stringify(store.parts));
            localStorage.setItem('mock_partItems', JSON.stringify(store.partItems));
        }
    },

    loadFromLocalStorage: () => {
        if (typeof window !== 'undefined') {
            const savedParts = localStorage.getItem('mock_parts');
            const savedItems = localStorage.getItem('mock_partItems');
            if (savedParts) store.parts = JSON.parse(savedParts);
            if (savedItems) store.partItems = JSON.parse(savedItems);
        }
    }
};
</file>

<file path="next.config.js">
/** @type {import('next').NextConfig} */
const nextConfig = {
  reactStrictMode: true,
}

module.exports = nextConfig
</file>

<file path="postcss.config.js">
module.exports = {
  plugins: {
    '@tailwindcss/postcss': {},
  },
}
</file>

<file path="README.md">
# SN-923
</file>

<file path="tailwind.config.js">
/** @type {import('tailwindcss').Config} */
module.exports = {
  content: [
    './app/**/*.{js,ts,jsx,tsx,mdx}',
    './pages/**/*.{js,ts,jsx,tsx,mdx}',
    './components/**/*.{js,ts,jsx,tsx,mdx}',
  ],
  theme: {
    extend: {},
  },
  plugins: [],
}
</file>

<file path="tsconfig.json">
{
  "compilerOptions": {
    "target": "es2017",
    "useDefineForClassFields": true,
    "lib": [
      "es2020",
      "dom",
      "dom.iterable"
    ],
    "module": "esnext",
    "skipLibCheck": true,
    "esModuleInterop": true,
    "allowSyntheticDefaultImports": true,
    "forceConsistentCasingInFileNames": true,
    /* Next.js */
    "moduleResolution": "node",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "jsx": "preserve",
    "incremental": true,
    /* Path mapping */
    "baseUrl": ".",
    "paths": {
      "@/*": [
        "./*"
      ]
    },
    "allowJs": true,
    "strict": false,
    "plugins": [
      {
        "name": "next"
      }
    ]
  },
  "include": [
    "next-env.d.ts",
    "**/*.ts",
    "**/*.tsx",
    ".next/types/**/*.ts"
  ],
  "exclude": [
    "node_modules"
  ]
}
</file>

<file path="tsconfig.node.json">
{
  "compilerOptions": {
    "composite": true,
    "skipLibCheck": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "allowSyntheticDefaultImports": true
  },
  "include": ["vite.config.ts"]
}
</file>

<file path="app/globals.css">
@import "tailwindcss";
</file>

<file path="app/layout.tsx">
import './globals.css'
import type { Metadata } from "next"

export const metadata: Metadata = {
  title: "SN-923",
  description: "在庫管理アプリケーション",
}

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html lang="ja">
      <body>{children}</body>
    </html>
  )
}
</file>

<file path="app/actions/consumeItem.ts">
'use server'

import { mockStore } from '@/lib/mockStore'
import { revalidatePath } from 'next/cache'

/**
 * 部品アイテムを消費済みにするサーバーアクション
 * @param itemId - 消費する部品アイテムのID
 */
export async function consumeItem(itemId: string | number) {
  const id = typeof itemId === 'string' ? parseInt(itemId, 10) : itemId;

  await mockStore.updatePartItem(id, {
    current_process: 'READY', // 本来のロジックに合わせてREADYにするか、または別のステータス
    completed_at: new Date(),
    storage_case: 'CONSUMED' // 便宜上の表記
  });

  console.log(`Consumed item ${id}`);

  revalidatePath('/');
  revalidatePath(`/item/${id}`);
}
</file>

<file path="app/actions/createPrinted.ts">
'use server'

import { mockStore } from '@/lib/mockStore'
import { revalidatePath } from 'next/cache'

/**
 * 3Dプリントされた新しい部品アイテムを作成するサーバーアクション
 * @param partId - 部品のID
 * @param qty - 数量
 * @param storageCaseLabel - 保管ケースのラベル（mock版では文字列）
 */
export async function createPrinted(
  partId: string | number,
  qty: number,
  storageCaseLabel: string
) {
  const pId = typeof partId === 'string' ? parseInt(partId, 10) : partId;

  // 指定された数量だけループを実行
  for (let i = 0; i < qty; i++) {
    await mockStore.addPartItem({
      part_id: pId,
      current_process: 'PRINTED',
      storage_case: storageCaseLabel,
      completed_at: null
    });
  }

  console.log(`Created ${qty} items for part ${pId}`);

  revalidatePath('/');
}
</file>

<file path="app/actions/updateProcess.ts">
'use server'

import { mockStore } from '@/lib/mockStore'
import { Process } from '@/app/types'
import { revalidatePath } from 'next/cache'

/**
 * 部品アイテムの工程を更新するサーバーアクション
 * @param itemId - 更新する部品アイテムのID
 * @param nextProcess - 次の工程名
 */
export async function updateProcess(
  itemId: string | number,
  nextProcess: string
) {
  // 文字列IDを数値に変換（mockStoreの仕様に合わせる）
  const id = typeof itemId === 'string' ? parseInt(itemId, 10) : itemId;

  // メモリ上のデータを更新
  await mockStore.updatePartItem(id, {
    current_process: nextProcess as Process,
    // READYに移行した場合は完了日時を設定
    completed_at: nextProcess === 'READY' ? new Date() : null
  });

  // 工程ログはモック版では省略、または必要なら追加
  console.log(`Updated item ${id} to process ${nextProcess}`);

  // キャッシュを更新してUIに反映
  revalidatePath('/');
  revalidatePath(`/item/${id}`);
}
</file>

<file path="app/item/[id]/page.tsx">
// mockStoreとサーバーアクションをインポート
import { mockStore } from '@/lib/mockStore'
import { updateProcess } from '@/app/actions/updateProcess'
import { consumeItem } from '@/app/actions/consumeItem'
import { PROCESSES } from '@/app/constants'
import Link from 'next/link'

// アイテム詳細ページのコンポーネント
export default async function ItemPage({ params }: { params: { id: string } }) {
  // 文字列IDを数値に変換
  const id = parseInt(params.id, 10);

  // mockStoreから特定の部品アイテムのデータを取得
  const data = await mockStore.getPartItem(id);

  if (!data) {
    return (
      <div className="p-8">
        <p>アイテムが見つかりませんでした (ID: {id})</p>
        <Link href="/" className="text-blue-600 underline">ダッシュボードに戻る</Link>
      </div>
    );
  }

  return (
    <div className="p-8 max-w-2xl mx-auto bg-white shadow-lg rounded-xl mt-10">
      <Link href="/" className="text-sm text-gray-500 hover:text-blue-600 mb-4 inline-block">
        ← ダッシュボードに戻る
      </Link>

      <h1 className="text-3xl font-bold mb-6 text-gray-800">
        部品番号: {data.parts.part_number}
      </h1>

      <div className="bg-blue-50 p-4 rounded-lg mb-8 border border-blue-100">
        <p className="text-lg">
          <span className="font-semibold text-gray-600">現在工程:</span>{' '}
          <span className="text-blue-700 font-bold">{data.current_process}</span>
        </p>
        <p className="text-sm text-gray-500 mt-1">保管ケース: {data.storage_case}</p>
      </div>

      <div className="space-y-8">
        {/* 工程更新フォーム */}
        <section>
          <h2 className="text-xl font-semibold mb-4 text-gray-700">工程を更新する</h2>
          <form action={async (formData) => {
            'use server'
            const next = formData.get('next') as string;
            await updateProcess(id, next);
          }} className="flex gap-4">
            <select
              name="next"
              defaultValue={data.current_process}
              className="flex-1 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"
            >
              {PROCESSES.map(proc => (
                <option key={proc.key} value={proc.key}>{proc.name}</option>
              ))}
            </select>
            <button className="bg-blue-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-blue-700 transition-colors shadow-md">
              工程更新
            </button>
          </form>
        </section>

        <hr className="border-gray-100" />

        {/* 組み込み完了フォーム */}
        <section>
          <h2 className="text-xl font-semibold mb-4 text-gray-700">このアイテムを完了にする</h2>
          <form action={async () => {
            'use server'
            await consumeItem(id);
          }}>
            <button className="w-full bg-green-600 text-white font-bold py-4 px-8 rounded-lg hover:bg-green-700 transition-colors shadow-md text-lg">
              組み込み完了（在庫から除外）
            </button>
          </form>
        </section>
      </div>
    </div>
  )
}
</file>

<file path="package.json">
{
  "name": "sn-923",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint"
  },
  "dependencies": {
    "@tailwindcss/postcss": "^4.1.18",
    "next": "^14.0.0",
    "react": "^18.2.0",
    "react-dom": "^18.2.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "@types/react": "^18.2.0",
    "@types/react-dom": "^18.2.0",
    "autoprefixer": "^10.4.23",
    "postcss": "^8.5.6",
    "tailwindcss": "^4.1.18",
    "typescript": "^5.3.0"
  }
}
</file>

<file path="app/print/page.tsx">
'use client'; // インタラクティブな操作のためClient Componentを使用

import React, { useState } from 'react';
import Link from 'next/link';
import { useRouter } from 'next/navigation';
import { parts } from '../data'; // 既存のテストデータを使用
import { PROCESSES } from '../constants'; // 工程定義を使用
import { createPrinted } from '../actions/createPrinted';

export default function PrintRegistrationPage() {
  const router = useRouter();
  const [selectedFile, setSelectedFile] = useState<File | null>(null);
  const [selectedPartId, setSelectedPartId] = useState<number>(parts[0]?.id || 0);
  const [quantity, setQuantity] = useState(1);
  const [targetProcess, setTargetProcess] = useState('PRINTED');
  const [isSubmitting, setIsSubmitting] = useState(false);

  // ファイル選択時の処理
  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const file = e.target.files?.[0];
    if (file) {
      setSelectedFile(file);
      // ファイル名に部品番号が含まれていれば自動選択する簡易ロジック
      const matchedPart = parts.find(p => file.name.includes(p.part_number));
      if (matchedPart) setSelectedPartId(matchedPart.id);
    }
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setIsSubmitting(true);

    try {
      // サーバーアクションを呼び出してモックデータを更新
      await createPrinted(
        selectedPartId,
        quantity,
        selectedFile?.name || `JOB-${Date.now()}`
      );

      router.push('/');
      router.refresh();
    } catch (error) {
      alert('エラーが発生しました');
      console.error(error);
    } finally {
      setIsSubmitting(false);
    }
  };

  return (
    <div className="bg-gray-50 min-h-screen p-4 sm:p-8 font-sans">
      <div className="max-w-2xl mx-auto">
        <header className="mb-8">
          <Link href="/" className="text-blue-600 hover:underline mb-2 inline-block">
            ← ダッシュボードに戻る
          </Link>
          <h1 className="text-3xl font-bold text-gray-800">3Dプリント登録</h1>
        </header>

        <form onSubmit={handleSubmit} className="bg-white rounded-xl shadow-lg p-6 space-y-6">
          {/* STLファイルアップロード */}
          <div className="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-blue-500 transition-colors">
            <input
              type="file"
              accept=".stl"
              onChange={handleFileChange}
              className="hidden"
              id="stl-upload"
            />
            <label htmlFor="stl-upload" className="cursor-pointer">
              <div className="text-gray-600">
                {selectedFile ? (
                  <span className="font-semibold text-blue-600">{selectedFile.name}</span>
                ) : (
                  "CADから出力したSTLファイルをアップロード"
                )}
              </div>
              <p className="text-sm text-gray-400 mt-2">クリックまたはドラッグ＆ドロップ</p>
            </label>
          </div>

          <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
            {/* 部品選択 */}
            <div>
              <label className="block text-sm font-medium text-gray-700 mb-1">対象部品</label>
              <select
                value={selectedPartId}
                onChange={(e) => setSelectedPartId(Number(e.target.value))}
                className="w-full border-gray-300 rounded-md shadow-sm p-2 border"
              >
                {parts.map(p => (
                  <option key={p.id} value={p.id}>{p.part_number}</option>
                ))}
              </select>
            </div>

            {/* 数量入力 */}
            <div>
              <label className="block text-sm font-medium text-gray-700 mb-1">数量</label>
              <input
                type="number"
                min="1"
                value={quantity}
                onChange={(e) => setQuantity(Number(e.target.value))}
                className="w-full border-gray-300 rounded-md shadow-sm p-2 border"
              />
            </div>
          </div>

          {/* ステータス選択 */}
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-1">登録時のステータス</label>
            <div className="flex gap-4 mt-2">
              {['UNPRINTED', 'PRINTED'].map((status) => (
                <label key={status} className="flex items-center">
                  <input
                    type="radio"
                    name="status"
                    value={status}
                    checked={targetProcess === status}
                    onChange={(e) => setTargetProcess(e.target.value)}
                    className="mr-2"
                  />
                  {PROCESSES.find(p => p.key === status)?.name}
                </label>
              ))}
            </div>
          </div>

          <button
            type="submit"
            disabled={isSubmitting}
            className={`w-full text-white font-bold py-3 px-6 rounded-lg shadow-md transition-colors text-lg ${isSubmitting ? 'bg-gray-400 cursor-not-allowed' : 'bg-blue-600 hover:bg-blue-700'
              }`}
          >
            {isSubmitting ? '登録中...' : 'プリントジョブを登録'}
          </button>
        </form>
      </div>
    </div>
  );
}
</file>

<file path="app/page.tsx">
import Link from 'next/link';
import { PROCESSES } from './constants';
import { aggregateProgress } from './utils';
import { SummaryCard } from './components/SummaryCard';
import { mockStore } from '@/lib/mockStore';

/**
 * ダッシュボードページ
 * 完全モックモードとして、mockStoreからデータを取得します。
 */
export default async function DashboardPage() {
  // mockStoreから最新データを取得
  const parts = await mockStore.getParts();
  const partItems = await mockStore.getPartItems();

  const totalInventory = partItems.length;
  const inProgress = partItems.filter(item => item.current_process !== 'READY').length;

  const today = new Date();
  today.setHours(0, 0, 0, 0);
  const completedToday = partItems.filter(item =>
    item.completed_at && new Date(item.completed_at) >= today
  ).length;

  // 2. マトリックス表示用にデータを集計
  const progressData = aggregateProgress(parts, partItems);

  return (
    <div className="bg-gray-50 min-h-screen p-4 sm:p-6 lg:p-8 font-sans">
      <header className="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8">
        <h1 className="text-3xl font-bold text-gray-800 mb-4 sm:mb-0">
          工程進捗ダッシュボード
        </h1>
        <Link href="/print">
          <span className="bg-blue-600 text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-blue-700 transition-all cursor-pointer inline-block text-lg">
            3Dプリント登録
          </span>
        </Link>
      </header>

      {/* サマリーカード */}
      <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
        <SummaryCard title="総在庫数" value={totalInventory} />
        <SummaryCard title="仕掛品数 (工程進行中)" value={inProgress} valueColor="text-orange-500" />
        <SummaryCard title="本日完了数" value={completedToday} valueColor="text-green-500" />
      </div>

      {/* 工程進捗マトリックス */}
      <div className="bg-white rounded-xl shadow-lg overflow-x-auto">
        <table className="w-full text-left">
          <thead className="bg-gray-100">
            <tr>
              <th className="p-4 text-lg font-semibold text-gray-700 sticky left-0 bg-gray-100 z-10 w-64 min-w-[250px]">
                部品番号 / 保管ケース
              </th>
              {PROCESSES.map(proc => (
                <th key={proc.key} className="p-4 text-lg font-semibold text-center text-gray-700 whitespace-nowrap min-w-[120px]">
                  {proc.name}
                </th>
              ))}
            </tr>
          </thead>
          <tbody className="divide-y divide-gray-200">
            {progressData.map(data => (
              <tr key={data.part_number} className="hover:bg-gray-50">
                <td className="p-4 sticky left-0 bg-white hover:bg-gray-50 z-10 border-r">
                  <div className="font-bold text-lg text-gray-900">{data.part_number}</div>
                  <div className="text-sm text-gray-500 mt-1">
                    {data.storage_cases.join(', ')}
                  </div>
                </td>
                {PROCESSES.map(proc => {
                  const count = data.counts[proc.key];
                  const part = parts.find(p => p.part_number === data.part_number);
                  const linkHref = part ? `/item/${part.id}?process=${proc.key}` : '#';

                  return (
                    <td key={proc.key} className="p-4 text-center">
                      <Link href={linkHref}>
                        <div
                          className={`
                            text-2xl font-bold rounded-lg w-20 h-14 flex items-center justify-center mx-auto cursor-pointer
                            transition-all duration-200 transform hover:scale-110 hover:shadow-lg
                            ${count > 0 ? 'bg-blue-100 text-blue-800' : 'bg-gray-100 text-gray-400'}
                          `}
                        >
                          {count}
                        </div>
                      </Link>
                    </td>
                  );
                })}
              </tr>
            ))}
          </tbody>
        </table>
      </div>
    </div>
  );
}
</file>

</files>
